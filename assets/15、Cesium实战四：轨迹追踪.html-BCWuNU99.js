import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,e as p}from"./app-DVIbrNyI.js";const t="/assets/003-1709200022437-Zec5fwio.gif",o={},e=p('<h1 id="_15、轨迹追踪" tabindex="-1"><a class="header-anchor" href="#_15、轨迹追踪"><span>15、轨迹追踪</span></a></h1><p>需求：锁定当前最终要素视角居中，展示轨迹动画，数据采用随机数据模拟经纬度。轨迹追踪可以理解为：一个物体沿着设定的轨迹进行移动，并将移动的路径绘制出来</p><img src="'+t+`" alt="003" style="zoom:67%;"><p>一、添加指定路径</p><p>二、时刻与位置绑定，创建采样位置属性对象</p><p>三、添加模型与运动轨迹</p><p>四、完整代码：</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="token comment">&lt;!--
 * @Author: twj
 * @Date: 2024-01-25 10:48:06
 * @LastEditTime: 2024-02-29 17:21:59
 * @LastEditors: twj
 * @Description: 轨迹回放
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewContainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Cesium <span class="token keyword">from</span> <span class="token string">&quot;cesium&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// import liechejiantou from &quot;./lichejiantou&quot;</span>

Cesium<span class="token punctuation">.</span>Ion<span class="token punctuation">.</span>defaultAccessToken <span class="token operator">=</span>
  <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjYTVhNjE0YS02YWVhLTQxNTAtYWI5NS1jYzUwMzliNmRjYjciLCJpZCI6OTc4NDgsImlhdCI6MTY1NTM4NDM0OH0.aT_4OCAgJ95R0l6Tg--u4jo9Ky6TlFa40p-8OxzYy2M&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token literal-property property">viewer</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Viewer<span class="token punctuation">;</span>
<span class="token comment">// 静态轨迹坐标经纬度</span>

<span class="token keyword">let</span> lnglatArr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">121.527589</span><span class="token punctuation">,</span> <span class="token number">38.957547</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.527825</span><span class="token punctuation">,</span> <span class="token number">38.960166</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.536472</span><span class="token punctuation">,</span> <span class="token number">38.959098</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.540442</span><span class="token punctuation">,</span> <span class="token number">38.958464</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.543489</span><span class="token punctuation">,</span> <span class="token number">38.958131</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.542888</span><span class="token punctuation">,</span> <span class="token number">38.955861</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">121.542266</span><span class="token punctuation">,</span> <span class="token number">38.953325</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token literal-property property">timeObj</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">timeSum</span><span class="token operator">:</span> number<span class="token punctuation">;</span> siteTime<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token literal-property property">starTime</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token literal-property property">stopTime</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">;</span>
<span class="token comment">// 初始化地图</span>
<span class="token keyword">const</span> <span class="token function-variable function">initMap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;viewContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">infoBox</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角图层选择按钮</span>
    <span class="token literal-property property">geocoder</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//搜索框</span>
    <span class="token literal-property property">homeButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//home按钮</span>
    <span class="token literal-property property">sceneModePicker</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//模式切换按钮</span>
    <span class="token literal-property property">navigationHelpButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角帮助按钮</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右下角全屏按钮</span>
    <span class="token comment">// terrainProvider: await Cesium.createWorldTerrainAsync(),</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//设置时间轴开始与结束时间</span>
<span class="token keyword">const</span> <span class="token function-variable function">setTimeline</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  timeObj <span class="token operator">=</span> <span class="token function">timeBetweenTwoPoints</span><span class="token punctuation">(</span>lnglatArr<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  starTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  stopTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">addSeconds</span><span class="token punctuation">(</span>
    starTime<span class="token punctuation">,</span>
    timeObj<span class="token punctuation">.</span>timeSum<span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>JulianDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>startTime <span class="token operator">=</span> starTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>stopTime <span class="token operator">=</span> stopTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> starTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//计算两点之间的耗时</span>
<span class="token keyword">const</span> <span class="token function-variable function">timeBetweenTwoPoints</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">lnglatArr</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">speed</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> positionsArr <span class="token operator">=</span> <span class="token function">coordinateConversion</span><span class="token punctuation">(</span>lnglatArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token literal-property property">timeSum</span><span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//时间累计总和</span>
  <span class="token keyword">let</span> <span class="token literal-property property">times</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionsArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      times<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timeSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    timeSum <span class="token operator">+=</span>
      <span class="token function">distanceBetweenTwoPoints</span><span class="token punctuation">(</span>positionsArr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> positionsArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> speed<span class="token punctuation">;</span>
    times<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timeSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    timeSum<span class="token punctuation">,</span>
    <span class="token literal-property property">siteTime</span><span class="token operator">:</span> times<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//经纬度转笛卡尔3</span>
<span class="token keyword">const</span> <span class="token function-variable function">coordinateConversion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">lnglatArr</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> positionsArr <span class="token operator">=</span> lnglatArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> positionsArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//计算两点之间测地线距离</span>
<span class="token keyword">const</span> distanceBetweenTwoPoints <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token literal-property property">positionsOne</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">,</span>
  <span class="token literal-property property">positionsTwo</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token literal-property property">distance</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token keyword">const</span> pointOneCartographic <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromCartesian</span><span class="token punctuation">(</span>positionsOne<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pointTwoCartographic <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromCartesian</span><span class="token punctuation">(</span>positionsTwo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> geodesic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>EllipsoidGeodesic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  geodesic<span class="token punctuation">.</span><span class="token function">setEndPoints</span><span class="token punctuation">(</span>pointOneCartographic<span class="token punctuation">,</span> pointTwoCartographic<span class="token punctuation">)</span><span class="token punctuation">;</span>
  distance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>
    Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>geodesic<span class="token punctuation">.</span>surfaceDistance<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>pointTwoCartographic<span class="token punctuation">.</span>height <span class="token operator">-</span> pointOneCartographic<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">+</span>distance<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//创建对于样本属性数据</span>
<span class="token keyword">const</span> createdProperty <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token literal-property property">lnglatArr</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span><span class="token parameter">SampledPositionProperty</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> positionsArr <span class="token operator">=</span> <span class="token function">coordinateConversion</span><span class="token punctuation">(</span>lnglatArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> property <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionsArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">addSeconds</span><span class="token punctuation">(</span>
      starTime<span class="token punctuation">,</span>
      timeObj<span class="token punctuation">.</span>siteTime<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>JulianDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    property<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> positionsArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> property<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">craetedEintiyTrack</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> property <span class="token operator">=</span> <span class="token function">createdProperty</span><span class="token punctuation">(</span>lnglatArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> trackEntity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">availability</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeIntervalCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">start</span><span class="token operator">:</span> starTime<span class="token punctuation">,</span>
        <span class="token literal-property property">stop</span><span class="token operator">:</span> stopTime<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> property<span class="token punctuation">,</span>
    <span class="token literal-property property">orientation</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>VelocityOrientationProperty</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">model</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">uri</span><span class="token operator">:</span> <span class="token string">&quot;/public/Cesium_Air.glb&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maximumScale</span><span class="token operator">:</span><span class="token number">268</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">resolution</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">material</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>trackedEntity <span class="token operator">=</span> trackEntity<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">craetedEintiyTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#viewContainer</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vw - 260px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),c=[e];function l(u,i){return s(),a("div",null,c)}const m=n(o,[["render",l],["__file","15、Cesium实战四：轨迹追踪.html.vue"]]),d=JSON.parse('{"path":"/studyNotes/Cesium%E7%AC%94%E8%AE%B0/15%E3%80%81Cesium%E5%AE%9E%E6%88%98%E5%9B%9B%EF%BC%9A%E8%BD%A8%E8%BF%B9%E8%BF%BD%E8%B8%AA.html","title":"15、轨迹追踪","lang":"zh-CN","frontmatter":{"description":"15、轨迹追踪 需求：锁定当前最终要素视角居中，展示轨迹动画，数据采用随机数据模拟经纬度。轨迹追踪可以理解为：一个物体沿着设定的轨迹进行移动，并将移动的路径绘制出来 003 一、添加指定路径 二、时刻与位置绑定，创建采样位置属性对象 三、添加模型与运动轨迹 四、完整代码：","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/studyNotes/Cesium%E7%AC%94%E8%AE%B0/15%E3%80%81Cesium%E5%AE%9E%E6%88%98%E5%9B%9B%EF%BC%9A%E8%BD%A8%E8%BF%B9%E8%BF%BD%E8%B8%AA.html"}],["meta",{"property":"og:site_name","content":"歪脖祭司"}],["meta",{"property":"og:title","content":"15、轨迹追踪"}],["meta",{"property":"og:description","content":"15、轨迹追踪 需求：锁定当前最终要素视角居中，展示轨迹动画，数据采用随机数据模拟经纬度。轨迹追踪可以理解为：一个物体沿着设定的轨迹进行移动，并将移动的路径绘制出来 003 一、添加指定路径 二、时刻与位置绑定，创建采样位置属性对象 三、添加模型与运动轨迹 四、完整代码："}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-23T11:02:41.000Z"}],["meta",{"property":"article:author","content":"祭司唐"}],["meta",{"property":"article:modified_time","content":"2024-03-23T11:02:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"15、轨迹追踪\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-23T11:02:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"祭司唐\\",\\"url\\":\\"\\"}]}"]]},"headers":[],"git":{"createdTime":1711191761000,"updatedTime":1711191761000,"contributors":[{"name":"tangwenjian","email":"gistwj@163.com","commits":1}]},"readingTime":{"minutes":1.86,"words":558},"filePathRelative":"studyNotes/Cesium笔记/15、Cesium实战四：轨迹追踪.md","localizedDate":"2024年3月23日","excerpt":"\\n<p>需求：锁定当前最终要素视角居中，展示轨迹动画，数据采用随机数据模拟经纬度。轨迹追踪可以理解为：一个物体沿着设定的轨迹进行移动，并将移动的路径绘制出来</p>\\n\\n<p>一、添加指定路径</p>\\n<p>二、时刻与位置绑定，创建采样位置属性对象</p>\\n<p>三、添加模型与运动轨迹</p>\\n<p>四、完整代码：</p>\\n<div class=\\"language-vue\\" data-ext=\\"vue\\" data-title=\\"vue\\"><pre class=\\"language-vue\\"><code><span class=\\"token comment\\">&lt;!--\\n * @Author: twj\\n * @Date: 2024-01-25 10:48:06\\n * @LastEditTime: 2024-02-29 17:21:59\\n * @LastEditors: twj\\n * @Description: 轨迹回放\\n--&gt;</span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>div</span> <span class=\\"token attr-name\\">id</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>viewContainer<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>div</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span> <span class=\\"token attr-name\\">setup</span> <span class=\\"token attr-name\\">lang</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>ts<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n<span class=\\"token keyword\\">import</span> <span class=\\"token operator\\">*</span> <span class=\\"token keyword\\">as</span> Cesium <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">\\"cesium\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token punctuation\\">{</span> onMounted <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">\\"vue\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// import liechejiantou from \\"./lichejiantou\\"</span>\\n\\nCesium<span class=\\"token punctuation\\">.</span>Ion<span class=\\"token punctuation\\">.</span>defaultAccessToken <span class=\\"token operator\\">=</span>\\n  <span class=\\"token string\\">\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjYTVhNjE0YS02YWVhLTQxNTAtYWI5NS1jYzUwMzliNmRjYjciLCJpZCI6OTc4NDgsImlhdCI6MTY1NTM4NDM0OH0.aT_4OCAgJ95R0l6Tg--u4jo9Ky6TlFa40p-8OxzYy2M\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">viewer</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>Viewer<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 静态轨迹坐标经纬度</span>\\n\\n<span class=\\"token keyword\\">let</span> lnglatArr <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.527589</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.957547</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.527825</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.960166</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.536472</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.959098</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.540442</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.958464</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.543489</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.958131</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.542888</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.955861</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">121.542266</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">38.953325</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">timeObj</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span> <span class=\\"token literal-property property\\">timeSum</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">;</span> siteTime<span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span> <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">starTime</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>JulianDate<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">stopTime</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>JulianDate<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 初始化地图</span>\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">initMap</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  viewer <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>Viewer</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"viewContainer\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token literal-property property\\">infoBox</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">baseLayerPicker</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//右上角图层选择按钮</span>\\n    <span class=\\"token literal-property property\\">geocoder</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//搜索框</span>\\n    <span class=\\"token literal-property property\\">homeButton</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//home按钮</span>\\n    <span class=\\"token literal-property property\\">sceneModePicker</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//模式切换按钮</span>\\n    <span class=\\"token literal-property property\\">navigationHelpButton</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//右上角帮助按钮</span>\\n    <span class=\\"token literal-property property\\">fullscreenButton</span><span class=\\"token operator\\">:</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//右下角全屏按钮</span>\\n    <span class=\\"token comment\\">// terrainProvider: await Cesium.createWorldTerrainAsync(),</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">//设置时间轴开始与结束时间</span>\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">setTimeline</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  timeObj <span class=\\"token operator\\">=</span> <span class=\\"token function\\">timeBetweenTwoPoints</span><span class=\\"token punctuation\\">(</span>lnglatArr<span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">50</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  starTime <span class=\\"token operator\\">=</span> Cesium<span class=\\"token punctuation\\">.</span>JulianDate<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">fromDate</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Date</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  stopTime <span class=\\"token operator\\">=</span> Cesium<span class=\\"token punctuation\\">.</span>JulianDate<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addSeconds</span><span class=\\"token punctuation\\">(</span>\\n    starTime<span class=\\"token punctuation\\">,</span>\\n    timeObj<span class=\\"token punctuation\\">.</span>timeSum<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>JulianDate</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  viewer<span class=\\"token punctuation\\">.</span>clock<span class=\\"token punctuation\\">.</span>startTime <span class=\\"token operator\\">=</span> starTime<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">clone</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  viewer<span class=\\"token punctuation\\">.</span>clock<span class=\\"token punctuation\\">.</span>stopTime <span class=\\"token operator\\">=</span> stopTime<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">clone</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  viewer<span class=\\"token punctuation\\">.</span>clock<span class=\\"token punctuation\\">.</span>currentTime <span class=\\"token operator\\">=</span> starTime<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">clone</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">//计算两点之间的耗时</span>\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">timeBetweenTwoPoints</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\"><span class=\\"token literal-property property\\">lnglatArr</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token literal-property property\\">speed</span><span class=\\"token operator\\">:</span> number</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">const</span> positionsArr <span class=\\"token operator\\">=</span> <span class=\\"token function\\">coordinateConversion</span><span class=\\"token punctuation\\">(</span>lnglatArr<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">timeSum</span><span class=\\"token operator\\">:</span> number <span class=\\"token operator\\">=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">;</span> <span class=\\"token comment\\">//时间累计总和</span>\\n  <span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">times</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">for</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">let</span> i <span class=\\"token operator\\">=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">;</span> i <span class=\\"token operator\\">&lt;</span> positionsArr<span class=\\"token punctuation\\">.</span>length<span class=\\"token punctuation\\">;</span> i<span class=\\"token operator\\">++</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>i <span class=\\"token operator\\">===</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n      times<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>timeSum<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token keyword\\">continue</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n    timeSum <span class=\\"token operator\\">+=</span>\\n      <span class=\\"token function\\">distanceBetweenTwoPoints</span><span class=\\"token punctuation\\">(</span>positionsArr<span class=\\"token punctuation\\">[</span>i <span class=\\"token operator\\">-</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> positionsArr<span class=\\"token punctuation\\">[</span>i<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">/</span> speed<span class=\\"token punctuation\\">;</span>\\n    times<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>timeSum<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span>\\n  <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n    timeSum<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">siteTime</span><span class=\\"token operator\\">:</span> times<span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">//经纬度转笛卡尔3</span>\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">coordinateConversion</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\"><span class=\\"token literal-property property\\">lnglatArr</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span></span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">const</span> positionsArr <span class=\\"token operator\\">=</span> lnglatArr<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">map</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">item</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">return</span> Cesium<span class=\\"token punctuation\\">.</span>Cartesian3<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">fromDegrees</span><span class=\\"token punctuation\\">(</span>item<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> item<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.5</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">return</span> positionsArr<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">//计算两点之间测地线距离</span>\\n<span class=\\"token keyword\\">const</span> distanceBetweenTwoPoints <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span>\\n  <span class=\\"token literal-property property\\">positionsOne</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>Cartesian3<span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token literal-property property\\">positionsTwo</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>Cartesian3\\n<span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">:</span> <span class=\\"token parameter\\">number</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">let</span> <span class=\\"token literal-property property\\">distance</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">const</span> pointOneCartographic <span class=\\"token operator\\">=</span> Cesium<span class=\\"token punctuation\\">.</span>Cartographic<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">fromCartesian</span><span class=\\"token punctuation\\">(</span>positionsOne<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">const</span> pointTwoCartographic <span class=\\"token operator\\">=</span> Cesium<span class=\\"token punctuation\\">.</span>Cartographic<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">fromCartesian</span><span class=\\"token punctuation\\">(</span>positionsTwo<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">const</span> geodesic <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>EllipsoidGeodesic</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  geodesic<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setEndPoints</span><span class=\\"token punctuation\\">(</span>pointOneCartographic<span class=\\"token punctuation\\">,</span> pointTwoCartographic<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  distance <span class=\\"token operator\\">=</span> Math<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sqrt</span><span class=\\"token punctuation\\">(</span>\\n    Math<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">pow</span><span class=\\"token punctuation\\">(</span>geodesic<span class=\\"token punctuation\\">.</span>surfaceDistance<span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">+</span>\\n      Math<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">pow</span><span class=\\"token punctuation\\">(</span>pointTwoCartographic<span class=\\"token punctuation\\">.</span>height <span class=\\"token operator\\">-</span> pointOneCartographic<span class=\\"token punctuation\\">.</span>height<span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n  <span class=\\"token keyword\\">return</span> <span class=\\"token operator\\">+</span>distance<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">toFixed</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">//创建对于样本属性数据</span>\\n<span class=\\"token keyword\\">const</span> createdProperty <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span>\\n  <span class=\\"token literal-property property\\">lnglatArr</span><span class=\\"token operator\\">:</span> number<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span><span class=\\"token parameter\\">SampledPositionProperty</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">const</span> positionsArr <span class=\\"token operator\\">=</span> <span class=\\"token function\\">coordinateConversion</span><span class=\\"token punctuation\\">(</span>lnglatArr<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">const</span> property <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>SampledPositionProperty</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">for</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">let</span> i <span class=\\"token operator\\">=</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">;</span> i <span class=\\"token operator\\">&lt;</span> positionsArr<span class=\\"token punctuation\\">.</span>length<span class=\\"token punctuation\\">;</span> i<span class=\\"token operator\\">++</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">const</span> time <span class=\\"token operator\\">=</span> Cesium<span class=\\"token punctuation\\">.</span>JulianDate<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addSeconds</span><span class=\\"token punctuation\\">(</span>\\n      starTime<span class=\\"token punctuation\\">,</span>\\n      timeObj<span class=\\"token punctuation\\">.</span>siteTime<span class=\\"token punctuation\\">[</span>i<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>JulianDate</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    property<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addSample</span><span class=\\"token punctuation\\">(</span>time<span class=\\"token punctuation\\">,</span> positionsArr<span class=\\"token punctuation\\">[</span>i<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token punctuation\\">}</span>\\n\\n  <span class=\\"token keyword\\">return</span> property<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">craetedEintiyTrack</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token keyword\\">const</span> property <span class=\\"token operator\\">=</span> <span class=\\"token function\\">createdProperty</span><span class=\\"token punctuation\\">(</span>lnglatArr<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token keyword\\">const</span> trackEntity <span class=\\"token operator\\">=</span> viewer<span class=\\"token punctuation\\">.</span>entities<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">add</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token literal-property property\\">availability</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>TimeIntervalCollection</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span>\\n      <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>TimeInterval</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">start</span><span class=\\"token operator\\">:</span> starTime<span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">stop</span><span class=\\"token operator\\">:</span> stopTime<span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">position</span><span class=\\"token operator\\">:</span> property<span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">orientation</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Cesium<span class=\\"token punctuation\\">.</span>VelocityOrientationProperty</span><span class=\\"token punctuation\\">(</span>property<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">model</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token literal-property property\\">uri</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/public/Cesium_Air.glb\\"</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token literal-property property\\">maximumScale</span><span class=\\"token operator\\">:</span><span class=\\"token number\\">268</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">path</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token literal-property property\\">resolution</span><span class=\\"token operator\\">:</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token literal-property property\\">width</span><span class=\\"token operator\\">:</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token literal-property property\\">material</span><span class=\\"token operator\\">:</span> Cesium<span class=\\"token punctuation\\">.</span>Color<span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">RED</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  viewer<span class=\\"token punctuation\\">.</span>trackedEntity <span class=\\"token operator\\">=</span> trackEntity<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token function\\">onMounted</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token function\\">initMap</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token function\\">setTimeline</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token function\\">craetedEintiyTrack</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>style</span> <span class=\\"token attr-name\\">scoped</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token style\\"><span class=\\"token language-css\\">\\n<span class=\\"token selector\\">#viewContainer</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token property\\">height</span><span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">calc</span><span class=\\"token punctuation\\">(</span>100vh - 100px<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  <span class=\\"token property\\">width</span><span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">calc</span><span class=\\"token punctuation\\">(</span>100vw - 260px<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>style</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre></div>","autoDesc":true}');export{m as comp,d as data};
