import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,e as t}from"./app-BjroUTcS.js";const p="/assets/image-20240301113955278-CyvXyr8_.png",e={},o=t('<h1 id="_16、场景粒子渲染" tabindex="-1"><a class="header-anchor" href="#_16、场景粒子渲染"><span>16、场景粒子渲染</span></a></h1><h3 id="一、particlesystem简介" tabindex="-1"><a class="header-anchor" href="#一、particlesystem简介"><span>一、ParticleSystem简介</span></a></h3><p>在Cesium中，粒子系统ParticleSystem是一种用于模拟和呈现大量小粒子效果的功能。这些小粒子可以代表火花、烟雾、雨滴等效果，用于增强Cesium中的三维场景的视觉效果。Cesium的粒子系统允许用户创建、配置和控制这些粒子的外观和行为。</p><p>Cesium的粒子系统提供了许多配置选项，通过指定粒子的纹理、颜色、生命周期、速度等属性，结合粒子系统的粒子回调函数，以满足不同的粒子效果的需求。</p><figure><img src="'+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="二、雪花粒子渲染实现" tabindex="-1"><a class="header-anchor" href="#二、雪花粒子渲染实现"><span>二、雪花粒子渲染实现</span></a></h3><h4 id="_1、初始化地图" tabindex="-1"><a class="header-anchor" href="#_1、初始化地图"><span>1、初始化地图</span></a></h4><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewContainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Cesium <span class="token keyword">from</span> <span class="token string">&quot;cesium&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

Cesium<span class="token punctuation">.</span>Ion<span class="token punctuation">.</span>defaultAccessToken <span class="token operator">=</span>  <span class="token string">&quot;your token&quot;</span><span class="token punctuation">;</span><span class="token comment">//替换token</span>
    
<span class="token comment">// 初始化地图</span>
<span class="token keyword">const</span> <span class="token function-variable function">initMap</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;viewContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">infoBox</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角图层选择按钮</span>
    <span class="token literal-property property">geocoder</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//搜索框</span>
    <span class="token literal-property property">homeButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//home按钮</span>
    <span class="token literal-property property">sceneModePicker</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//模式切换按钮</span>
    <span class="token literal-property property">navigationHelpButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角帮助按钮</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右下角全屏按钮</span>
    <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrainAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#viewContainer</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vw - 260px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、重设相机视角" tabindex="-1"><a class="header-anchor" href="#_2、重设相机视角"><span>2、重设相机视角</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">//重设相机</span>
<span class="token keyword">const</span> <span class="token function-variable function">resetCameraFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    destination<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    orientation<span class="token operator">:</span> <span class="token punctuation">{</span>
      heading<span class="token operator">:</span> <span class="token number">4.731089976107251</span><span class="token punctuation">,</span>
      pitch<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0.32003481981370063</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、创建雪花粒子系统" tabindex="-1"><a class="header-anchor" href="#_3、创建雪花粒子系统"><span>3、创建雪花粒子系统</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> snowParticlePrimitives<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Primitive<span class="token punctuation">;</span>
<span class="token comment">//创建雪花粒子系统</span>
<span class="token keyword">const</span> <span class="token function-variable function">startSnow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  snowParticlePrimitives <span class="token operator">=</span> scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">ParticleSystem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//模型矩阵：从粒子生成的本地坐标系转换到地球所在的坐标系</span>
      modelMatrix<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromTranslation</span><span class="token punctuation">(</span>
        Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">//发射器模型矩阵：从粒子发射器坐标系转换到粒子生成的本地坐标系</span>
      emitterModelMatrix<span class="token operator">:</span> computeEmitterModelMatrixSnow<span class="token punctuation">,</span>
      minimumSpeed<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span>
      maximumSpeed<span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
      lifetime<span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">,</span>
      emitter<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">BoxEmitter</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian3</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//粒子发射器。</span>
      startScale<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
      endScale<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      image<span class="token operator">:</span> <span class="token string">&quot;/snowflake_particle.png&quot;</span><span class="token punctuation">,</span>
      emissionRate<span class="token operator">:</span> <span class="token number">7000</span><span class="token punctuation">,</span> <span class="token comment">//每秒发射的粒子数</span>
      startColor<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      endColor<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      minimumImageSize<span class="token operator">:</span> minimumSnowImageSize<span class="token punctuation">,</span>
      maximumImageSize<span class="token operator">:</span> maximumSnowImageSize<span class="token punctuation">,</span>
      updateCallback<span class="token operator">:</span> snowUpdate<span class="token punctuation">,</span><span class="token comment">//雪花更新函数</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、创建雪花更新函数" tabindex="-1"><a class="header-anchor" href="#_4、创建雪花更新函数"><span>4、创建雪花更新函数</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> snowGravityScratch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//雪花重力方向单位向量</span>
<span class="token keyword">const</span> snowParticleSize <span class="token operator">=</span> <span class="token number">12.0</span><span class="token punctuation">;</span><span class="token comment">//雪花粒子大小</span>
<span class="token comment">//最小粒子尺寸</span>
<span class="token keyword">const</span> minimumSnowImageSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian2</span><span class="token punctuation">(</span>
  snowParticleSize<span class="token punctuation">,</span>
  snowParticleSize
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//最大粒子尺寸</span>
<span class="token keyword">const</span> maximumSnowImageSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian2</span><span class="token punctuation">(</span>
  snowParticleSize <span class="token operator">*</span> <span class="token number">2.0</span><span class="token punctuation">,</span>
  snowParticleSize <span class="token operator">*</span> <span class="token number">2.0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义雪花更新函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">snowUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>particle<span class="token operator">:</span> <span class="token punctuation">{</span>
  position<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  velocity<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  endColor<span class="token operator">:</span> <span class="token punctuation">{</span> alpha<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//根据传入坐标创建归一化向量（方向单位向量）</span>
  snowGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    snowGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//单位向量乘以随机标量</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">multiplyByScalar</span><span class="token punctuation">(</span>
    snowGravityScratch<span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>
    snowGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//粒子的速度矢量</span>
  particle<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>velocity<span class="token punctuation">,</span>
    snowGravityScratch<span class="token punctuation">,</span>
    particle<span class="token punctuation">.</span>velocity
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5、转换矩阵" tabindex="-1"><a class="header-anchor" href="#_5、转换矩阵"><span>5、转换矩阵</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">//局部旋转矩阵</span>
<span class="token keyword">const</span> ratationAngle <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//旋转角度</span>
<span class="token comment">//X轴旋转左侧4*4矩阵</span>
<span class="token keyword">const</span> ratationMatrixX <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromRotationTranslation</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>Matrix3<span class="token punctuation">.</span><span class="token function">fromRotationX</span><span class="token punctuation">(</span>ratationAngle<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Z轴旋转右侧3*3矩阵</span>
<span class="token keyword">const</span> ratationMatrixZ <span class="token operator">=</span>   Cesium<span class="token punctuation">.</span>Matrix3<span class="token punctuation">.</span><span class="token function">fromRotationZ</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">//计算雪花发射器模型矩阵</span>
<span class="token keyword">const</span> computeEmitterModelMatrixSnow <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">multiplyByMatrix3</span><span class="token punctuation">(</span>
  ratationMatrixX<span class="token punctuation">,</span>
  ratationMatrixZ<span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、雨滴相对雪花粒子系统创建" tabindex="-1"><a class="header-anchor" href="#三、雨滴相对雪花粒子系统创建"><span>三、雨滴相对雪花粒子系统创建</span></a></h3><h4 id="_1、创建雨水粒子系统" tabindex="-1"><a class="header-anchor" href="#_1、创建雨水粒子系统"><span>1、创建雨水粒子系统</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-variable function">startRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">ParticleSystem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      modelMatrix<span class="token operator">:</span> <span class="token function">computeModelMatrix</span><span class="token punctuation">(</span>snowParticlePrimitives<span class="token punctuation">)</span><span class="token punctuation">,</span>
      emitterModelMatrix<span class="token operator">:</span> <span class="token function">computeEmitterModelMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      minimumSpeed<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">//设置最小限度（以米/秒为单位），超过该限值将随机选择粒子的实际速度。</span>
      maximumSpeed<span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token comment">//设置最大界限（以米/秒为单位），低于该界限将随机选择粒子的实际速度。</span>
      lifetime<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">//粒子系统发射粒子的时间，以秒为单位。</span>
      emitter<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">BoxEmitter</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian3</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//粒子发射器。</span>
      startScale<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
      endScale<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      image<span class="token operator">:</span> <span class="token string">&quot;/circular_particle.png&quot;</span><span class="token punctuation">,</span>
      emissionRate<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
      startColor<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      endColor<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      imageSize<span class="token operator">:</span> rainImageSize<span class="token punctuation">,</span>
      updateCallback<span class="token operator">:</span> rainUpdate<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、创建雨水更新函数" tabindex="-1"><a class="header-anchor" href="#_2、创建雨水更新函数"><span>2、创建雨水更新函数</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> rainGravityScratch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义雨水更新函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">rainUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>particle<span class="token operator">:</span> <span class="token punctuation">{</span>
  velocity<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  position<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  endColor<span class="token operator">:</span> <span class="token punctuation">{</span> alpha<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  rainGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    rainGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  rainGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">multiplyByScalar</span><span class="token punctuation">(</span>
    rainGravityScratch<span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>
    rainGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  particle<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>velocity<span class="token punctuation">,</span>
    rainGravityScratch<span class="token punctuation">,</span>
    particle<span class="token punctuation">.</span>velocity
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、转换矩阵" tabindex="-1"><a class="header-anchor" href="#_3、转换矩阵"><span>3、转换矩阵</span></a></h4><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">//计算雨水模型矩阵</span>
<span class="token keyword">const</span> <span class="token function-variable function">computeModelMatrixRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span>primitive<span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Primitive<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> primitive<span class="token punctuation">.</span>modelMatrix<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emitterModelMatrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> translation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rotation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">Quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hpr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">HeadingPitchRoll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> trs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium</span><span class="token punctuation">.</span><span class="token function">TranslationRotationScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//由平移、旋转和缩放定义的仿射变换。</span>

<span class="token comment">//计算雨水粒子发射器模型矩阵</span>
<span class="token keyword">const</span> <span class="token function-variable function">computeEmitterModelMatrixRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//设置头、俯仰角、旋转角度和旋转轴</span>
  hpr <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>HeadingPitchRoll<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> hpr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置平移</span>
  trs<span class="token punctuation">.</span>translation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromElements</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置旋转</span>
  trs<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Quaternion<span class="token punctuation">.</span><span class="token function">fromHeadingPitchRoll</span><span class="token punctuation">(</span>hpr<span class="token punctuation">,</span> rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//返回仿射变换矩阵</span>
  <span class="token keyword">return</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromTranslationRotationScale</span><span class="token punctuation">(</span>trs<span class="token punctuation">,</span> emitterModelMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、完整代码" tabindex="-1"><a class="header-anchor" href="#四、完整代码"><span>四、完整代码</span></a></h3><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewContainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Cesium <span class="token keyword">from</span> <span class="token string">&quot;cesium&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

Cesium<span class="token punctuation">.</span>Ion<span class="token punctuation">.</span>defaultAccessToken <span class="token operator">=</span><span class="token string">&quot;your token&quot;</span>

<span class="token keyword">let</span> <span class="token literal-property property">viewer</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Viewer<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token literal-property property">scene</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Scene<span class="token punctuation">;</span>

<span class="token comment">// 初始化地图</span>
<span class="token keyword">const</span> <span class="token function-variable function">initMap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;viewContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">infoBox</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角图层选择按钮</span>
    <span class="token literal-property property">geocoder</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//搜索框</span>
    <span class="token literal-property property">homeButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//home按钮</span>
    <span class="token literal-property property">sceneModePicker</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//模式切换按钮</span>
    <span class="token literal-property property">navigationHelpButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右上角帮助按钮</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//右下角全屏按钮</span>
    <span class="token literal-property property">shouldAnimate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">terrain</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span><span class="token function">fromWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  scene <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">;</span>
  scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>depthTestAgainstTerrain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token function">resetCameraFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">startSnow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">startRain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">resetCameraFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">destination</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">orientation</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">heading</span><span class="token operator">:</span> <span class="token number">4.731089976107251</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pitch</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0.32003481981370063</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> snowGravityScratch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> snowParticleSize <span class="token operator">=</span> <span class="token number">12.0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> minimumSnowImageSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span>
  snowParticleSize<span class="token punctuation">,</span>
  snowParticleSize
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> maximumSnowImageSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span>
  snowParticleSize <span class="token operator">*</span> <span class="token number">2.0</span><span class="token punctuation">,</span>
  snowParticleSize <span class="token operator">*</span> <span class="token number">2.0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义雪花更新函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">snowUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">particle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  <span class="token literal-property property">velocity</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  <span class="token literal-property property">endColor</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//根据传入坐标创建归一化向量（方向单位向量）</span>
  snowGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    snowGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//单位向量乘以随机标量</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">multiplyByScalar</span><span class="token punctuation">(</span>
    snowGravityScratch<span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>
    snowGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//粒子的速度矢量</span>
  particle<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>velocity<span class="token punctuation">,</span>
    snowGravityScratch<span class="token punctuation">,</span>
    particle<span class="token punctuation">.</span>velocity
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//局部旋转矩阵</span>
<span class="token keyword">const</span> ratationAngle <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ratationMatrix <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromRotationTranslation</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>Matrix3<span class="token punctuation">.</span><span class="token function">fromRotationX</span><span class="token punctuation">(</span>ratationAngle<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> computeEmitterModelMatrixSnow <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">multiplyByMatrix3</span><span class="token punctuation">(</span>
  ratationMatrix<span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Matrix3<span class="token punctuation">.</span><span class="token function">fromRotationZ</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emitterModelMatrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> translation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rotation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hpr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>HeadingPitchRoll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> trs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TranslationRotationScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//由平移、旋转和缩放定义的仿射变换。</span>

<span class="token comment">//计算发射器模型矩阵</span>
<span class="token keyword">const</span> <span class="token function-variable function">computeEmitterModelMatrixRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//设置头、俯仰角、旋转角度和旋转轴</span>
  hpr <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>HeadingPitchRoll<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> hpr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置平移</span>
  trs<span class="token punctuation">.</span>translation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromElements</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置旋转</span>
  trs<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Quaternion<span class="token punctuation">.</span><span class="token function">fromHeadingPitchRoll</span><span class="token punctuation">(</span>hpr<span class="token punctuation">,</span> rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//返回仿射变换矩阵</span>
  <span class="token keyword">return</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromTranslationRotationScale</span><span class="token punctuation">(</span>trs<span class="token punctuation">,</span> emitterModelMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token literal-property property">snowParticlePrimitives</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Primitive<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">startSnow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为什么要移除全部？？？会不会有不好的影响？因为entity也是转换为primitive</span>

  snowParticlePrimitives <span class="token operator">=</span> scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleSystem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">modelMatrix</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Matrix4<span class="token punctuation">.</span><span class="token function">fromTranslation</span><span class="token punctuation">(</span>
        Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emitterModelMatrix</span><span class="token operator">:</span> computeEmitterModelMatrixSnow<span class="token punctuation">,</span>
      <span class="token literal-property property">minimumSpeed</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maximumSpeed</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">lifetime</span><span class="token operator">:</span> <span class="token number">15.0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emitter</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>BoxEmitter</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//粒子发射器。</span>
      <span class="token literal-property property">startScale</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">endScale</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token string">&quot;/snowflake_particle.png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emissionRate</span><span class="token operator">:</span> <span class="token number">7000</span><span class="token punctuation">,</span> <span class="token comment">//每秒发射的粒子数</span>
      <span class="token literal-property property">startColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">endColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minimumImageSize</span><span class="token operator">:</span> minimumSnowImageSize<span class="token punctuation">,</span>
      <span class="token literal-property property">maximumImageSize</span><span class="token operator">:</span> maximumSnowImageSize<span class="token punctuation">,</span>
      <span class="token literal-property property">updateCallback</span><span class="token operator">:</span> snowUpdate<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// rain</span>
<span class="token keyword">const</span> rainParticleSize <span class="token operator">=</span> <span class="token number">15.0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rainImageSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span>
  rainParticleSize<span class="token punctuation">,</span>
  rainParticleSize <span class="token operator">*</span> <span class="token number">2.0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rainGravityScratch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义雨水更新函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">rainUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">particle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">velocity</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">;</span>
  <span class="token literal-property property">endColor</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  rainGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    rainGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  rainGravityScratch <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">multiplyByScalar</span><span class="token punctuation">(</span>
    rainGravityScratch<span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>
    rainGravityScratch
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  particle<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    particle<span class="token punctuation">.</span>velocity<span class="token punctuation">,</span>
    rainGravityScratch<span class="token punctuation">,</span>
    particle<span class="token punctuation">.</span>velocity
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//计算模型矩阵</span>
<span class="token keyword">const</span> <span class="token function-variable function">computeModelMatrixRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">primitive</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Primitive</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> primitive<span class="token punctuation">.</span>modelMatrix<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">startRain</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ParticleSystem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">modelMatrix</span><span class="token operator">:</span> <span class="token function">computeModelMatrixRain</span><span class="token punctuation">(</span>snowParticlePrimitives<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emitterModelMatrix</span><span class="token operator">:</span> <span class="token function">computeEmitterModelMatrixRain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minimumSpeed</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">//设置最小限度（以米/秒为单位），超过该限值将随机选择粒子的实际速度。</span>
      <span class="token literal-property property">maximumSpeed</span><span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token comment">//设置最大界限（以米/秒为单位），低于该界限将随机选择粒子的实际速度。</span>
      <span class="token literal-property property">lifetime</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token comment">//粒子系统发射粒子的时间，以秒为单位。</span>
      <span class="token literal-property property">emitter</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>BoxEmitter</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian3</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//粒子发射器。</span>
      <span class="token literal-property property">startScale</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">endScale</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token string">&quot;/circular_particle.png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emissionRate</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
      <span class="token literal-property property">startColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">endColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">imageSize</span><span class="token operator">:</span> rainImageSize<span class="token punctuation">,</span>
      <span class="token literal-property property">updateCallback</span><span class="token operator">:</span> rainUpdate<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#viewContainer</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vw - 260px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25),c=[o];function i(l,u){return s(),a("div",null,c)}const d=n(e,[["render",i],["__file","16、Cesium实战五：场景粒子渲染.html.vue"]]),m=JSON.parse('{"path":"/studyNotes/Cesium%E7%AC%94%E8%AE%B0/16%E3%80%81Cesium%E5%AE%9E%E6%88%98%E4%BA%94%EF%BC%9A%E5%9C%BA%E6%99%AF%E7%B2%92%E5%AD%90%E6%B8%B2%E6%9F%93.html","title":"16、场景粒子渲染","lang":"zh-CN","frontmatter":{"description":"16、场景粒子渲染 一、ParticleSystem简介 在Cesium中，粒子系统ParticleSystem是一种用于模拟和呈现大量小粒子效果的功能。这些小粒子可以代表火花、烟雾、雨滴等效果，用于增强Cesium中的三维场景的视觉效果。Cesium的粒子系统允许用户创建、配置和控制这些粒子的外观和行为。 Cesium的粒子系统提供了许多配置选项，通...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/studyNotes/Cesium%E7%AC%94%E8%AE%B0/16%E3%80%81Cesium%E5%AE%9E%E6%88%98%E4%BA%94%EF%BC%9A%E5%9C%BA%E6%99%AF%E7%B2%92%E5%AD%90%E6%B8%B2%E6%9F%93.html"}],["meta",{"property":"og:site_name","content":"歪脖祭司"}],["meta",{"property":"og:title","content":"16、场景粒子渲染"}],["meta",{"property":"og:description","content":"16、场景粒子渲染 一、ParticleSystem简介 在Cesium中，粒子系统ParticleSystem是一种用于模拟和呈现大量小粒子效果的功能。这些小粒子可以代表火花、烟雾、雨滴等效果，用于增强Cesium中的三维场景的视觉效果。Cesium的粒子系统允许用户创建、配置和控制这些粒子的外观和行为。 Cesium的粒子系统提供了许多配置选项，通..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-23T11:02:41.000Z"}],["meta",{"property":"article:author","content":"祭司唐"}],["meta",{"property":"article:modified_time","content":"2024-03-23T11:02:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"16、场景粒子渲染\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-23T11:02:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"祭司唐\\",\\"url\\":\\"\\"}]}"]]},"headers":[{"level":3,"title":"一、ParticleSystem简介","slug":"一、particlesystem简介","link":"#一、particlesystem简介","children":[]},{"level":3,"title":"二、雪花粒子渲染实现","slug":"二、雪花粒子渲染实现","link":"#二、雪花粒子渲染实现","children":[]},{"level":3,"title":"三、雨滴相对雪花粒子系统创建","slug":"三、雨滴相对雪花粒子系统创建","link":"#三、雨滴相对雪花粒子系统创建","children":[]},{"level":3,"title":"四、完整代码","slug":"四、完整代码","link":"#四、完整代码","children":[]}],"git":{"createdTime":1711191761000,"updatedTime":1711191761000,"contributors":[{"name":"tangwenjian","email":"gistwj@163.com","commits":1}]},"readingTime":{"minutes":5.45,"words":1635},"filePathRelative":"studyNotes/Cesium笔记/16、Cesium实战五：场景粒子渲染.md","localizedDate":"2024年3月23日","excerpt":"\\n<h3>一、ParticleSystem简介</h3>\\n<p>在Cesium中，粒子系统ParticleSystem是一种用于模拟和呈现大量小粒子效果的功能。这些小粒子可以代表火花、烟雾、雨滴等效果，用于增强Cesium中的三维场景的视觉效果。Cesium的粒子系统允许用户创建、配置和控制这些粒子的外观和行为。</p>\\n<p>Cesium的粒子系统提供了许多配置选项，通过指定粒子的纹理、颜色、生命周期、速度等属性，结合粒子系统的粒子回调函数，以满足不同的粒子效果的需求。</p>\\n<figure><figcaption></figcaption></figure>\\n<h3>二、雪花粒子渲染实现</h3>","autoDesc":true}');export{d as comp,m as data};
